<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stanbic Receipt</title>
<style>
body{font-family:"Segoe UI",Arial;background:#f2f2f2;margin:0;padding:0;display:flex;justify-content:center;align-items:center;min-height:100vh;}
.wrapper{background:white;width:90%;max-width:480px;padding:20px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.1);}
h2{text-align:center;margin-bottom:20px;color:#1c2c8c;}
.info{margin-bottom:10px;font-size:14px;}
.info b{display:inline-block;width:140px;}
button{margin-top:20px;width:100%;padding:12px;border:none;background:#1c2c8c;color:white;border-radius:8px;cursor:pointer;font-size:16px;}
button:hover{opacity:0.9;}
</style>
</head>
<body>

<div class="wrapper" id="receiptWrapper">
<h2>Stanbic IBTC Bank</h2>
<div id="receiptContent"></div>
<button onclick="downloadPDF()">Download as PDF</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
const receiptData = JSON.parse(sessionStorage.getItem("receiptData")||"{}");
const container = document.getElementById("receiptContent");
if(!receiptData.sender){container.innerHTML="<p style='color:red;text-align:center;'>No receipt data found.</p>";} 
else{
  container.innerHTML=`
  <div class="info"><b>Sender Name:</b>${receiptData.sender}</div>
  <div class="info"><b>Sender Account:</b>${receiptData.senderAcc}</div>
  <div class="info"><b>Sender Bank:</b>${receiptData.senderBank}</div>
  <div class="info"><b>Beneficiary Name:</b>${receiptData.beneficiary}</div>
  <div class="info"><b>Beneficiary Account:</b>${receiptData.beneficiaryAcc}</div>
  <div class="info"><b>Beneficiary Bank:</b>${receiptData.beneficiaryBank}</div>
  <div class="info"><b>Amount:</b>${receiptData.amount}</div>
  <div class="info"><b>Narration:</b>${receiptData.narration}</div>
  <div class="info"><b>Date:</b>${receiptData.date}</div>
  <div class="info"><b>Reference:</b>${receiptData.ref}</div>`;
}

async function downloadPDF(){
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  let y = 10;
  doc.setFontSize(16); doc.setTextColor(28,44,140);
  doc.text("Stanbic IBTC Bank Receipt",105,y,{align:"center"}); y+=10;
  doc.setFontSize(12); doc.setTextColor(0,0,0);
  for(const [key,value] of Object.entries(receiptData)){
    doc.text(`${key.charAt(0).toUpperCase()+key.slice(1).replace(/([A-Z])/g," $1")}: ${value}`,10,y);
    y+=8;
  }
  doc.save(`Receipt-${receiptData.ref}.pdf`);
}
</script>
</body>
</html>