<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stanbic Receipt</title>
<script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<style>
body{ font-family:"Segoe UI",Arial; background:#fff; margin:0; padding:0; }
#receipt{ width:100%; max-width:420px; margin:auto; padding:12px 18px; box-sizing:border-box; }
.logo{text-align:right;}
.logo img{width:65px;}
h3{margin:8px 0 4px; font-size:20px;}
.date{font-size:13px;color:#555;margin-bottom:6px;}
.divider{border-bottom:2px solid #2e3aa1;margin:8px 0;}
.row{display:flex;justify-content:space-between;align-items:flex-start;font-size:13px;margin-bottom:4px;}
.label{color:#222;}
.value{text-align:right;font-weight:500;}
.value div{margin-bottom:2px;}
.status{font-weight:600;}
.notice{background:#e6f0fb;padding:10px;margin-top:15px;font-size:13px;line-height:1.4;}
button{width:100%;padding:12px;margin-top:15px;border:none;border-radius:6px;background:#1c2c8c;color:#fff;font-size:15px;cursor:pointer;}
button:hover{background:#3a59b5;}
</style>
</head>
<body onload="loadReceipt()">

<div id="receipt">
<div class="logo"><img src="logo.png"></div>
<h3>Online Transaction Receipt</h3>
<div class="date" id="date"></div>

<div class="divider"></div>
<div class="row">
  <div class="label">TRANSACTION</div>
  <div class="value"><div id="amount"></div><div>ONE OFF PAYMENT</div><div id="transDate"></div></div>
</div>

<div class="divider"></div>
<div class="row">
  <div class="label">BENEFICIARY</div>
  <div class="value">
    <div id="beneficiary"></div>
    <div id="beneficiaryAcc"></div>
    <div id="beneficiaryBank"></div>
  </div>
</div>

<div class="divider"></div>
<div class="row">
  <div class="label">SENDER</div>
  <div class="value">
    <div id="sender"></div>
    <div id="senderAcc"></div>
    <div>STANBIC IBTC BANK</div>
  </div>
</div>

<div class="divider"></div>
<div class="row">
  <div class="label">STATUS</div>
  <div class="value status">SUCCESSFUL</div>
</div>

<div class="divider"></div>
<div class="row">
  <div class="label">NARRATION</div>
  <div class="value" id="narration"></div>
</div>

<div class="notice">
<b>Notice</b><br>
This is an online auto generated transaction receipt.<br>
This is an authentic receipt, for further inquiries, contact 0700 909 909 909<br>
Email CustomerCareNigeria@stanbicibtc.com<br>
Generated from Stanbic IBTC Super App
</div>
</div>

<button onclick="downloadReceipt()">Download Image</button>

<script>
function loadReceipt(){
  const data = JSON.parse(sessionStorage.getItem("receiptData"));
  if(!data) location.href="index.html";

  amount.innerHTML = "NGN " + Number(data.amount).toLocaleString(undefined,{minimumFractionDigits:2});
  transDate.innerHTML = new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"long",year:"numeric"});
  date.innerHTML = new Date().toLocaleString("en-GB",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});

  sender.innerHTML = data.sender;
  senderAcc.innerHTML = data.senderAcc;

  beneficiary.innerHTML = data.beneficiary;
  beneficiaryAcc.innerHTML = data.beneficiaryAcc;
  beneficiaryBank.innerHTML = data.beneficiaryBank;

  narration.innerHTML = data.narration;
}

function downloadReceipt(){
  const btn = document.querySelector("button");
  btn.style.display="none";

  const receipt = document.getElementById("receipt");

  html2canvas(receipt,{
    scale:3,
    scrollX:0,
    scrollY:0,
    useCORS:true,
    width: receipt.offsetWidth,
    height: receipt.offsetHeight
  }).then(canvas=>{
    const link = document.createElement("a");
    link.download = "stanbic_receipt.png";
    link.href = canvas.toDataURL("image/png");
    link.click();
    btn.style.display="block";
  });
}
</script>
</body>
</html>